# WebWatcher ğŸ”

<p align="center">
  <strong>æ™ºèƒ½ç½‘é¡µå˜åŒ–ç›‘æ§å·¥å…·</strong> â€” ç²¾å‡† Diff å¯¹æ¯” Â· å¤šæ¸ é“é€šçŸ¥ Â· æ¨¡æ¿ä¸€é”®ç›‘æ§
</p>

<p align="center">
  <img src="https://img.shields.io/badge/Next.js-16-black?logo=next.js" alt="Next.js" />
  <img src="https://img.shields.io/badge/TypeScript-5-blue?logo=typescript" alt="TypeScript" />
  <img src="https://img.shields.io/badge/Tailwind_CSS-4-06B6D4?logo=tailwindcss" alt="Tailwind" />
  <img src="https://img.shields.io/badge/Docker-Ready-2496ED?logo=docker" alt="Docker" />
  <img src="https://img.shields.io/badge/License-MIT-green" alt="License" />
</p>

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸŒ ç½‘é¡µç›‘æ§
- **CSS é€‰æ‹©å™¨å®šä½** â€” ç²¾å‡†ç›‘æ§é¡µé¢ç‰¹å®šåŒºåŸŸ
- **JSON API ç›‘æ§** â€” æ”¯æŒ JSONPath æå–æ•°æ®æ¥å£å­—æ®µ
- **SPA æ¸²æŸ“æ”¯æŒ** â€” é€šè¿‡ Playwright æ¸²æŸ“ React/Vue ç­‰å•é¡µåº”ç”¨
- **çµæ´»é¢‘ç‡** â€” 5åˆ†é’Ÿåˆ°1å¤©ï¼Œ6 ç§æ£€æŸ¥é¢‘ç‡å¯é€‰

### ğŸ” ç²¾å‡† Diff å¯¹æ¯”
- **è¡Œçº§å·®å¼‚ç®—æ³•** â€” åŸºäº `diff` åº“å®ç°ç²¾ç¡®æ–‡æœ¬å¯¹æ¯”
- **å¯è§†åŒ–ä¾§è¾¹æ ** â€” ç»¿è‰²é«˜äº®æ–°å¢ï¼Œçº¢è‰²æ ‡è®°åˆ é™¤
- **å¿«ç…§å†å²** â€” æŸ¥çœ‹ä»»æ„ç›‘æ§ç›®æ ‡çš„å®Œæ•´å¿«ç…§è®°å½•
- **æ™ºèƒ½å™ªéŸ³è¿‡æ»¤** â€” è‡ªåŠ¨è¿‡æ»¤æ—¶é—´æˆ³ã€å¹¿å‘Šç­‰åŠ¨æ€å†…å®¹

### ğŸ“¬ å…¨æ¸ é“é€šçŸ¥ï¼ˆ6 ç§ï¼‰
| æ¸ é“ | è¯´æ˜ |
|------|------|
| ğŸ“§ **é‚®ä»¶** | SMTP å‘é€ï¼ŒHTML å¯Œæ–‡æœ¬ |
| ğŸ”µ **é£ä¹¦** | æœºå™¨äºº Webhookï¼Œå¡ç‰‡æ¶ˆæ¯ |
| ğŸŸ¢ **ä¼ä¸šå¾®ä¿¡** | ç¾¤æœºå™¨äºº Webhook |
| ğŸ“± **Serveré…±** | æ¨é€åˆ°å¾®ä¿¡ |
| âœˆï¸ **Telegram** | Bot API æ¨é€ |
| ğŸ’¬ **Discord** | Webhook Embed æ¶ˆæ¯ |
| ğŸ”— **è‡ªå®šä¹‰ Webhook** | å‘é€ JSON åˆ°ä»»æ„ URL |

### ğŸ¯ æ·±åº¦æŠ“å–é…ç½®
- **è‡ªå®šä¹‰ Headers** â€” æ”¯æŒ Authorizationã€Referer ç­‰
- **Cookie æ³¨å…¥** â€” ç›‘æ§éœ€è¦ç™»å½•çš„é¡µé¢
- **User-Agent åˆ‡æ¢** â€” é¢„è®¾ Chrome/Firefox/Safari/Mobile/Googlebot
- **ä»£ç†æ± ** â€” HTTP/HTTPS/SOCKS5 ä»£ç†è½®æ¢ï¼Œè‡ªåŠ¨æ•…éšœæ£€æµ‹

### ğŸ“‹ ç›‘æ§æ¨¡æ¿åº“ï¼ˆ14 ä¸ªé¢„è®¾ï¼‰
| åˆ†ç±» | æ¨¡æ¿ |
|------|------|
| å¼€å‘è€… | GitHub Releases Â· GitHub Commits Â· NPM åŒ…æ›´æ–° |
| æ–°é—»èµ„è®¯ | Hacker News Â· V2EX çƒ­é—¨ Â· Product Hunt |
| ç”µå•†ä»·æ ¼ | äº¬ä¸œ Â· Amazon |
| æœåŠ¡çŠ¶æ€ | GitHub Status Â· Cloudflare Status |
| ç¤¾äº¤åª’ä½“ | å¾®åšçƒ­æœ Â· çŸ¥ä¹çƒ­æ¦œ |
| æ”¿åºœå…¬å‘Š | æ”¿ç­–æ›´æ–° |

### ğŸ” ç”Ÿäº§å°±ç»ª
- **Docker ä¸€é”®éƒ¨ç½²** â€” Dockerfile + docker-compose
- **èº«ä»½è®¤è¯** â€” Admin å¯†ç ç™»å½•ï¼ŒCookie ä¼šè¯
- **å¥åº·æ£€æŸ¥** â€” `/api/health` ç«¯ç‚¹ï¼ŒDocker åŸç”Ÿæ”¯æŒ
- **ç»„ä»¶åŒ–æ¶æ„** â€” 7 ä¸ªç‹¬ç«‹ React ç»„ä»¶ï¼Œæ˜“äºç»´æŠ¤

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šæœ¬åœ°å¼€å‘

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/tianyaxiang/webwatcher.git
cd webwatcher

# å®‰è£…ä¾èµ–
pnpm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev
```

è®¿é—® http://localhost:3000

### æ–¹å¼äºŒï¼šDocker éƒ¨ç½²ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/tianyaxiang/webwatcher.git
cd webwatcher

# ç¼–è¾‘é…ç½®
cp .env.example .env.local
# ä¿®æ”¹ .env.local ä¸­çš„é…ç½®...

# ä¸€é”®å¯åŠ¨
docker compose up -d
```

è®¿é—® http://localhost:3000

---

## âš™ï¸ ç¯å¢ƒå˜é‡é…ç½®

```env
# ============ åŸºç¡€é…ç½® ============
DATA_DIR=./data                          # æ•°æ®å­˜å‚¨ç›®å½•
ADMIN_PASSWORD=your-password             # ç®¡ç†å¯†ç ï¼ˆä¸è®¾ç½®åˆ™æ— éœ€ç™»å½•ï¼‰

# ============ é‚®ä»¶é€šçŸ¥ ============
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=your-email@example.com
SMTP_PASS=your-password
SMTP_FROM=noreply@example.com

# ============ é£ä¹¦é€šçŸ¥ ============
FEISHU_WEBHOOK_URL=https://open.feishu.cn/open-apis/bot/v2/hook/xxx

# ============ ä¼ä¸šå¾®ä¿¡é€šçŸ¥ ============
WECOM_WEBHOOK_URL=https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=xxx

# ============ Serveré…± (å¾®ä¿¡æ¨é€) ============
SERVERCHAN_KEY=SCTxxx

# ============ Telegram ============
TELEGRAM_BOT_TOKEN=your-bot-token

# ============ ä»£ç†æ±  (å¯é€‰) ============
PROXY_URLS=http://user:pass@host1:port,socks5://host2:port
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ auth/           # ç™»å½•è®¤è¯
â”‚   â”‚   â”œâ”€â”€ capabilities/   # ç³»ç»Ÿèƒ½åŠ›æŸ¥è¯¢
â”‚   â”‚   â”œâ”€â”€ changes/        # å˜åŒ–è®°å½•
â”‚   â”‚   â”œâ”€â”€ export/         # æ•°æ®å¯¼å‡º (Markdown/CSV)
â”‚   â”‚   â”œâ”€â”€ health/         # å¥åº·æ£€æŸ¥
â”‚   â”‚   â”œâ”€â”€ notifications/  # é€šçŸ¥çŠ¶æ€ä¸æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ proxies/        # ä»£ç†æ± ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ scheduler/      # è°ƒåº¦å™¨æ§åˆ¶
â”‚   â”‚   â”œâ”€â”€ snapshots/      # å¿«ç…§ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ stats/          # ç»Ÿè®¡æ•°æ®
â”‚   â”‚   â”œâ”€â”€ targets/        # ç›‘æ§ç›®æ ‡ CRUD
â”‚   â”‚   â””â”€â”€ templates/      # ç›‘æ§æ¨¡æ¿
â”‚   â”œâ”€â”€ login/              # ç™»å½•é¡µé¢
â”‚   â”œâ”€â”€ page.tsx            # ä¸»é¡µé¢ (ä»ªè¡¨ç›˜)
â”‚   â””â”€â”€ layout.tsx          # å¸ƒå±€
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ AppHeader.tsx       # é¡¶éƒ¨å¯¼èˆªæ 
â”‚   â”œâ”€â”€ StatsCards.tsx      # ç»Ÿè®¡å¡ç‰‡
â”‚   â”œâ”€â”€ TargetList.tsx      # ç›‘æ§ç›®æ ‡åˆ—è¡¨
â”‚   â”œâ”€â”€ RecentChanges.tsx   # æœ€è¿‘å˜åŒ–åˆ—è¡¨
â”‚   â”œâ”€â”€ ChangeSidebar.tsx   # Diff å¯¹æ¯”ä¾§è¾¹æ 
â”‚   â”œâ”€â”€ SnapshotPanel.tsx   # å¿«ç…§å†å²é¢æ¿
â”‚   â””â”€â”€ AddTargetModal.tsx  # æ·»åŠ ç›‘æ§å¼¹çª—
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ webMonitor.ts       # ç½‘é¡µç›‘æ§æ ¸å¿ƒ (é™æ€/æµè§ˆå™¨/JSON)
â”‚   â”œâ”€â”€ browserRenderer.ts  # Playwright æ¸²æŸ“å¼•æ“
â”‚   â”œâ”€â”€ storage.ts          # æ•°æ®å­˜å‚¨
â”‚   â”œâ”€â”€ scheduler.ts        # å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨
â”‚   â”œâ”€â”€ notification.ts     # å¤šæ¸ é“é€šçŸ¥
â”‚   â”œâ”€â”€ proxyPool.ts        # ä»£ç†æ± ç®¡ç†
â”‚   â””â”€â”€ templates.ts        # ç›‘æ§æ¨¡æ¿å®šä¹‰
â”œâ”€â”€ types/
â”‚   â””â”€â”€ index.ts            # TypeScript ç±»å‹
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ utils.ts            # å·¥å…·å‡½æ•°
â””â”€â”€ middleware.ts            # è®¤è¯ä¸­é—´ä»¶
```

---

## ğŸ”§ API æ¥å£

### ç›‘æ§ç›®æ ‡
| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| `GET` | `/api/targets` | è·å–æ‰€æœ‰ç›‘æ§ç›®æ ‡ |
| `POST` | `/api/targets` | æ·»åŠ æ–°ç›‘æ§ç›®æ ‡ |
| `GET` | `/api/targets/[id]` | è·å–ç›®æ ‡è¯¦æƒ… + å˜åŒ–è®°å½• |
| `PUT` | `/api/targets/[id]` | æ›´æ–°ç›‘æ§ç›®æ ‡ |
| `DELETE` | `/api/targets/[id]` | åˆ é™¤ç›‘æ§ç›®æ ‡ |
| `POST` | `/api/targets/[id]` | ç«‹å³è§¦å‘æ£€æŸ¥ |

### å˜åŒ–è®°å½•ä¸å¿«ç…§
| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| `GET` | `/api/changes` | è·å–å˜åŒ–è®°å½•åˆ—è¡¨ |
| `GET` | `/api/snapshots?targetId=xxx` | è·å–ç›®æ ‡å¿«ç…§åˆ—è¡¨ |
| `GET` | `/api/snapshots/[id]` | è·å–å¿«ç…§å†…å®¹ |

### è°ƒåº¦ä¸ç³»ç»Ÿ
| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| `GET` | `/api/scheduler` | è°ƒåº¦å™¨çŠ¶æ€ |
| `POST` | `/api/scheduler` | æ§åˆ¶è°ƒåº¦å™¨ (start/stop/check-all) |
| `GET` | `/api/stats` | ç›‘æ§ç»Ÿè®¡ |
| `GET` | `/api/health` | å¥åº·æ£€æŸ¥ï¼ˆå…è®¤è¯ï¼‰ |
| `GET` | `/api/capabilities` | ç³»ç»Ÿèƒ½åŠ›ï¼ˆPlaywright/ä»£ç†ï¼‰ |

### é€šçŸ¥ä¸å¯¼å‡º
| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| `GET` | `/api/notifications` | é€šçŸ¥æ¸ é“é…ç½®çŠ¶æ€ |
| `POST` | `/api/notifications` | æµ‹è¯•é€šçŸ¥æ¸ é“ |
| `GET` | `/api/export?format=markdown` | å¯¼å‡º Markdown æŠ¥å‘Š |
| `GET` | `/api/export?format=csv` | å¯¼å‡º CSV è¡¨æ ¼ |
| `GET` | `/api/templates` | è·å–ç›‘æ§æ¨¡æ¿åˆ—è¡¨ |

### è®¤è¯
| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| `POST` | `/api/auth` | ç™»å½•ï¼ˆè®¾ç½® Cookieï¼‰ |
| `DELETE` | `/api/auth` | ç™»å‡º |

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç”¨é€” |
|------|------|
| **Next.js 16** | å…¨æ ˆæ¡†æ¶ (App Router) |
| **TypeScript** | ç±»å‹å®‰å…¨ |
| **Tailwind CSS 4** | æ ·å¼ |
| **Cheerio** | HTML è§£æ |
| **Playwright** | SPA æ¸²æŸ“ï¼ˆå¯é€‰ï¼‰ |
| **diff** | æ–‡æœ¬å·®å¼‚ç®—æ³• |
| **Lucide React** | å›¾æ ‡ |
| **Nodemailer** | é‚®ä»¶å‘é€ |

---

## ğŸ“ˆ ä½¿ç”¨åœºæ™¯

- ğŸ›’ **ä»·æ ¼ç›‘æ§** â€” ç”µå•†å•†å“ä»·æ ¼å˜åŠ¨æé†’
- ğŸ“° **å†…å®¹è¿½è¸ª** â€” æ–°é—»ã€åšå®¢ã€è®ºå›æ›´æ–°ç›‘æ§
- ğŸ¢ **ç«å“åˆ†æ** â€” ç«äº‰å¯¹æ‰‹ç½‘ç«™å†…å®¹å˜åŒ–
- ğŸŸ¢ **æœåŠ¡çŠ¶æ€** â€” ç¬¬ä¸‰æ–¹æœåŠ¡å¯ç”¨æ€§ç›‘æ§
- ğŸ“Š **æ•°æ®æ¥å£** â€” JSON API è¿”å›å€¼å˜åŒ–æ£€æµ‹
- ğŸ“œ **æ”¿ç­–ç›‘æ§** â€” æ”¿åºœå…¬å‘Šã€æ³•è§„æ›´æ–°

---

## ğŸ“„ License

MIT

---

<p align="center">
  Made with â¤ï¸ by <a href="https://github.com/tianyaxiang">tianyaxiang</a>
</p>
